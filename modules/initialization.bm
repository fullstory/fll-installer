#-------------------------
# Global Variables
# ------------------------
CONFIG_FILE="$HOME/.sidconf"
LOG="$HOME/.sidlog"

#
###-------------------------------------
#
function logit()
{
	local TIME
	say "$@"
	TIME=$(date)
	[ -n "$*" ] && echo $TIME: "$@" >> $LOG || echo >> $LOG
}

#
###-------------------------------------
#
TARGET_MNT_POINT="/media/hdinstall" 
TARGET_MNT_NAME="hdinstall" 


#
###-------------------------------------
# make use of distro-defaults
###-------------------------------------
#
FLL_DISTRO_NAME="sidux"
FLL_LIVE_USER="sidux"
FLL_MOUNTPOINT="/fll/sidux"

[ -r /etc/default/distro ] && . /etc/default/distro

DEFAULT_USER="$FLL_LIVE_USER"
DEFAULT_DIR="$FLL_MOUNTPOINT"

#
###-------------------------------------
# The default user
###-------------------------------------
#
DEFAULT_NAME=$(getent passwd "$DEFAULT_USER" | cut -f5 -d: | cut -f1 -d,)

# 
###-------------------------------------
# make sure proc is mounted
###-------------------------------------
#
[ -f /proc/cmdline ] || mount -t proc proc /proc 2>/dev/null
CMDLINE=$(</proc/cmdline)

# 
###-------------------------------------
# try to calculate the room needed
###-------------------------------------
#
ROOT_MIN_RAW=$(df -m "$DEFAULT_DIR" | tail -1 | awk '{print $3}')
# squashfs unpacks to ca 2.8 size , give some percent for safety
ROOT_MIN=$(($ROOT_MIN_RAW*360/100)) 


#
###-------------------------------------
# Localisation  ** still needed ?? **
###-------------------------------------
#
export TEXTDOMAINDIR="/usr/share/locale"
export TEXTDOMAIN=fll-installer


#
###-------------------------------------
# log my call
###-------------------------------------
#
logit $"Initialisation done"
#
#
###-------------------------------------

